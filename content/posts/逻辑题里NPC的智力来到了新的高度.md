---
categories: 浴室奇思
tags:
  - 谜题
date: 2024-03-23
lastmod: 
description: 
summary: 只是想看点脑筋急转弯，不要真的来数学题啊！
title: 逻辑题里NPC的智力达到了新的高度
slug: logic-puzzles
ShowTOC: 
math: true
---
前两天看到了[这样一道迷题]( https://math.berkeley.edu/~qiuyu/blog/puzzles#:~:text=Problem%2036. )：

> 一个房间里放有可数无穷个箱子，编号为 1, 2, 3, ...，每个箱子里放有一个实数。现在一个人走进这个房间，按任意顺序打开箱子查看里面的数（他可以一次打开并查看无穷多个箱子），但最后他需要指定一个未打开的箱子猜测里面放的是什么数。  
> 现在有 100 个完全相同的房间，箱子中的实数和顺序也完全一样。100个人商量策略后独立进入这些房间。试设计一种策略使得至少有 99 个人猜对。  
> （题目表述略有改动）

存在能让 99 个人在没有额外信息的情况下猜对箱子里的数的策略实在非常神奇，神奇到我很快放弃了思考。搜索了一圈只发现了一份[四十九页的围绕这个问题的讲义](https://www.annamgrim.com/Infinity.pdf)。好在实际这个问题的解答只有几页，其他都是背景科普，于是拉了一位比较熟悉这套数学黑话的朋友翻译了一下。更神奇了。

{{< collapse summary="试图用刚学的黑话复述一下解法" openByDefault=true >}}

策略中要用到以下结论：
对于所有实数列组成的集合，我们可以定义这样一个[等价关系](https://zh.wikipedia.org/wiki/%E7%AD%89%E4%BB%B7%E5%85%B3%E7%B3%BB)：如果对于足够大的整数 $n$，我们都有 $x_n = y_n$，那我们说实数列 $x, y$ 等价。
1. 问题中的一百个人定义了上述等价关系，并且对每个[等价类](https://zh.wikipedia.org/wiki/%E7%AD%89%E4%BB%B7%E7%B1%BB) 都选择了一个 representative 。选择公理保证他们能做到这一点。
2. 每个人进入房间后，把箱子按编号最后两位数分成一百组，即编号为 $1,101,201, \dots$ 的箱子为第一组，编号 $2,102,102, \dots$ 为第二组，以此类推。
3. 第 $i$ 个房间中的人打开除了第 $i$ 组之外的其余九十九组箱子。
4. 我们把第 $k$ 组箱子中数字的序列记为 $b_k$，这个序列中的第 $n$ 个数记为 $b_k(n)$。$b_k$ 所在的等价类的 representative 记为 $b^\*_k$。我们可以找到从第几个数开始 $b_k$ 和 $b^\*_k$ 是一样的，也就是找到最小的 $m_k$ 使得对于所有的 $n\geq m_k$ ，都有 $b_k(n) = b^\*_k(n)$。
5. 第 $i$ 个房间中的人在第三步打开箱子后可以确定 $m_k$ $(k\neq i)$。选择其中最大的数，记为 $M_i$。打开第 $i$ 组除了前 $M_i$ 个之外的所有箱子。
6. 通过第 $i$ 组后面无穷多个箱子我们可以确定 $b_i$ 所在的等价类的 representative $b^\*_i$。猜测第 $i$ 组第 $M_i$ 个箱子中的数是 $b^*\_i(M_i)$。

只要 $m_i$ 不大于 $M_i = \text{max}(m_1, \dots, m_{i-1}, m_{i+1}, \dots, m_{100})$，第 $i$ 人的猜测就是对的。可以看出这一百个人中至多只有一个人不能猜对。

{{< /collapse >}}

看各种脑筋急转弯/逻辑谜题的时候，已经习惯了题目中假设“所有参与者都是理性的且非常聪明”，但上面这个解法里的人超越了聪明，达到了超能力的地步。或者说人应该对自己的数学知识有更清醒的认识，在看到“可数无穷”的时候就应该判断这个问题会涉及到我不知道的概念或者我大概没办法想出来的构造。

这个问题因为前置知识过多答案太长没有办法流行起来，它朴素的表述也佐证了这一点。一个大家积极转发讨论的脑筋急转弯总会被加上点花里胡哨的背景，比如说一百个囚犯进入一百个房间，猜不出来就会立刻行刑之类的，成为众多[一百](https://limboy.me/posts/100-prisoners/)[囚犯](http://www.matrix67.com/blog/archives/443)[问题](https://eigolomoh.bitbucket.io/math/100_prisoners_and_a_lamp.html)中的一员。不清楚监狱如何成为现代谜题常见场景，仿佛监狱里个个都是数学天才，每天都在用自己的聪明才智摆脱被处死的命运。我觉得"囚徒困境"这个词一定在其中起到了很大作用。

其他谜题的设计也不是特别能细想。其中当然有比较正经的，比如说鸡兔同笼，毕竟是小孩子教科书上的问题，大家态度还是比较严肃的，最多搞一点九尾狐与九头鸟，或者像日本是仙鹤与乌龟之类的变形。其他主要在民间流传的问题的流变那都属于民俗学的研究范围，像是“狼羊草过河”的问题，有过好色的男人和妹妹的版本；“一辆车里有两个母亲而两个女儿，请问车里最少有多少人（我瞎编的但你明白是哪类问题）”这类问题看起来就像是为了搞伦理哏硬编的。即使是相对复杂的问题，比如[蓝眼睛问题](https://xkcd.com/blue_eyes.html)，也有一个“村子里的一百个丈夫都在出轨但他们各自的妻子不知道”的表述。上文那位比较懂数学黑话的朋友作出过以下很符合中学男生心智的论断：
> 一切能用人话表述的组合问题都有一个黄暴版本。

我觉得是对的，而且不限于组合问题。

这种风格的谜题民俗学还是不多说了，文中一些例子来自[《迷人的逻辑题》](https://www.douban.com/book/subject/30325727/)，有兴趣的朋友可以翻一翻。成年人还在看脑筋急转弯显得有点幼稚，但作为填字游戏笑话精选一类的消遣也未尝不可。要是作为面试问题的话，我看不出除了让出题人觉得自己聪明以外有任何用处。现在已经不流行了，但似乎某些行业还是会问这种问题。对此，一位朋友曾经做出以下应对，读者也不妨试一试：在最后反问面试官的环节说，“刚才的脑筋急转弯很有意思，我这里也有一个，来考考你吧。”